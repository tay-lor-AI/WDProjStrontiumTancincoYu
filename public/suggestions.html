<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Suggestions</title>

    <link rel="stylesheet" href="subSet.css">
    <link rel="stylesheet" href="../footer.css">

    <style>
        /* SCROLL AREA */
        .scroll-container {
            display: flex;
            gap: 2rem;
            overflow-x: auto;
            padding: 3rem;
            scroll-snap-type: x mandatory;
        }

        /* CARD STYLE */
        .suggestion-card {
            min-width: 400px;
            max-width: 400px;
            background: rgba(218, 180, 232, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            scroll-snap-align: start;
            box-shadow: 0 0 20px rgba(240, 242, 252, 0.1);
        }

        /* HEADING */
        .suggestion-card h2 {
            font-family: 'Work Sans';
            color: #8b87f2;
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        /* DESCRIPTION */
        .suggestion-card p {
            font-family: 'Montserrat';
            color: rgb(91, 42, 165);
            margin-bottom: 1rem;
        }

        /* NAME */
        .suggestion-card .username {
            font-size: 0.9rem;
            opacity: 0.7;
        }

        /* SCROLLBAR STYLE */
        .scroll-container::-webkit-scrollbar {
            height: 8px;
        }

        .scroll-container::-webkit-scrollbar-thumb {
            background: rgba(139, 135, 242, 0.5);
            border-radius: 10px;
        }
    </style>
</head>

<body>

    <h1>suggestions</h1>

    <video autoplay muted loop id="myVideo">
        <source src="../homeBackground.mp4" type="video/mp4">
    </video>

    <div class="scroll-container" id="suggestions-container">
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
        import { getFirestore, collection, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCY9gcgkSC6_PrS2WLWX_PipjTyAt-vHNA",
            authDomain: "fandom-suggestion-box.firebaseapp.com",
            projectId: "fandom-suggestion-box",
            storageBucket: "fandom-suggestion-box.firebasestorage.app",
            messagingSenderId: "1021637275253",
            appId: "1:1021637275253:web:fc9bf456512efbee51123c"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const container = document.getElementById("suggestions-container");

        const q = query(collection(db, "suggestions"), orderBy("timestamp", "desc"));
        const querySnapshot = await getDocs(q);

        querySnapshot.forEach((doc) => {
            const data = doc.data();

            const card = document.createElement("div");
            card.classList.add("suggestion-card");

            card.innerHTML = `
        <h2>${data.fandom}</h2>
        <p>${data.description}</p>
        ${data.username ? `<p class="username">â€” ${data.username}</p>` : ""}
    `;

            container.appendChild(card);
        });
    </script>
    <footer id="footer-container">
        <div class="footer">
            <div class="footer-heading a">
            </div>

            <div class="footer-heading b">
                <p>
                    <a href="../home.html">
                        <img class="favicon" src="../images/favicon.gif" alt="favicon">
                    </a>
                </p>
            </div>

            <div class="footer-heading c">
                <a href="sourcesAndSocials.html">Sources and Socials</a>
                <a href="howToFandom.html">How to Fandom</a>
                <a href="completeList.html">Complete List</a>
                <a href="suggestionBox.html">Suggestion Box</a>
            </div>
        </div>
    </footer>
</body>

</html>